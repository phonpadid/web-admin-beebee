import{z as v,m as c}from"./index-DmLjb2yN.js";import{i as d,a as m,A as P,b as w}from"./axios.config-9RTEzkkw.js";var h=Object.defineProperty,y=Object.getOwnPropertyDescriptor,A=(t,a,e,s)=>{for(var r=s>1?void 0:s?y(a,e):a,n=t.length-1,o;n>=0;n--)(o=t[n])&&(r=(s?o(a,e,r):o(r))||r);return s&&r&&h(a,e,r),r},b=(t,a)=>(e,s)=>a(e,s,t);let l=class{constructor(t){this._api=t}async create(t){const a=await this._api.axios({method:"post",url:"/accounts/permissions/",data:{name:t.name}});return console.log(a),{data:a.data,message:"ບັນທຶກສຳເລັດ",status:"success"}}async update(t){return{data:(await this._api.axios({method:"put",url:`/admin/permissions/update/${t.id}`,data:{name:t.name}})).data,message:"ອັບເດດສຳເລັດ",status:"success"}}async getAll(t){const a=await this._api.axios({url:"/accounts/permissions/",params:{page:t.page,page_size:t.limit}}),{results:e,count:s}=a.data;return{data:{props:e,total:s},status:"success"}}};l=A([d(),b(0,m(P))],l);var O=Object.defineProperty,j=Object.getOwnPropertyDescriptor,L=(t,a,e,s)=>{for(var r=s>1?void 0:s?j(a,e):a,n=t.length-1,o;n>=0;n--)(o=t[n])&&(r=(s?o(a,e,r):o(r))||r);return s&&r&&O(a,e,r),r},x=(t,a)=>(e,s)=>a(e,s,t);let p=class{constructor(t){this._api=t}async create(t){return await this._api.create(t)}async update(t){return await this._api.update(t)}async getAll(t){return await this._api.getAll(t)}};p=L([d(),x(0,m(l))],p);const D=v("permissions-store",()=>{const t=w.resolve(p),a=c({data:{props:[],total:0},isLoading:!1,btnLoading:!1,error:""}),e=c({limit:10,filter:{}}),s=c({page:1,limit:1e4,filter:{}});async function r(){a.isLoading=!0;const i=await t.getAll({page:e.page,limit:e.limit,filter:e.filter});i&&i.data&&i.status==="success"&&(a.data.props=i.data.props,a.data.total=i.data.total,a.isLoading=!1)}async function n(){a.isLoading=!0;const i=await t.getAll({page:s.page,limit:s.limit,filter:s.filter});if(i&&i.data&&i.status==="success"){const _=[12,11,8],u=i.data.props.filter(g=>_.includes(Number(g.content_type)));a.data.props=u,a.data.total=u.length,a.isLoading=!1}}async function o(i){return await t.create(i)}async function f(i){return await t.update(i)}return{getAllPermission:r,create:o,update:f,getAllPer:n,statePermission:a,setStateFilter:e}});export{D as p};
