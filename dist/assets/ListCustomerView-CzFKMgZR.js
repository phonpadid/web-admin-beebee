import{c as W}from"./index-DGVL7Egt.js";import{_ as k,I as $}from"./iconify-C0mOQioB.js";import{d as X,u as Z,k as x,r as I,v as ee,o as r,f as c,c as a,i as s,h as p,F as S,e as m,a as te,g as L,j as C,t as n,n as ae,q as f,p as se,C as N,s as Y}from"./index-BpXBQnxn.js";import{u as oe}from"./index-9lTxRn36.js";import{L as ne}from"./LineChartOutlined-BheXCfHu.js";import"./axios.config-9RTEzkkw.js";const le=l=>[{title:l("customers.table_field.avatar"),dataIndex:"full_avatar_url"},{title:l("users.table_field.full_name"),dataIndex:"full_name",key:"full_name",customRender:({record:d})=>`${d.first_name} ${d.last_name}`},{title:l("customers.table_field.email"),dataIndex:"email"},{title:l("customers.table_field.type"),dataIndex:"type"},{title:l("customers.table_field.created_at"),dataIndex:"created_at"},{title:l("customers.table_field.more"),dataIndex:"actions",align:"center"}],re={class:"text-base font-bold text-blue-500"},ie={class:"text-[10px]"},ce={key:1,class:"w-[3rem] h-[3rem] flex items-center justify-center rounded-full bg-gray-300 text-white font-bold"},me={key:2},ue={key:3},pe={key:4,class:"flex items-center justify-center gap-2"},Ce=X({__name:"ListCustomerView",props:{searchQuery:{}},setup(l){const{push:d}=te(),{getAllCustomer:h,stateCustomer:_,setStateFilter:g}=W(),{remove:D}=oe(),{t:u}=Z(),M=x(()=>le(u)),V=async e=>{await D(Number(e.id)),Y.success({message:u("popconfirm.message_success.title"),description:u("popconfirm.message_success.messages")}),F(Number(e.customer_id),!1),await h()},j=()=>{Y.error({message:u("popconfirm.message_cancel.title"),description:u("popconfirm.message_cancel.messages")})},z=x(()=>({items_per_page:u("pagination.items_per_page")})),y=I({total:_.data.total,pageSize:g.limit,current:g.page,showSizeChanger:!0,pageSizeOptions:["10","20","50","100"],locale:z,onChange:A});async function A(e,o){y.value.current=e,y.value.pageSize=o,g.page=e,g.limit=o,await h()}const B=e=>{d({name:"customer_edit",params:{id:e.customer_id}})};ee(async()=>{await h(),y.value.total=_.data.total});const H=I({}),F=(e,o)=>{H.value[e]=o},v=l,O=x(()=>{if(!v.searchQuery)return _.data.props;const e=v.searchQuery.toLowerCase();return _.data.props.filter(o=>String(o.first_name).toLowerCase().includes(e)||String(o.last_name).toLowerCase().includes(e))}),P=e=>{var b;return e?`${((b=e.first_name)==null?void 0:b.charAt(0))||""}`.toUpperCase():""},Q={vip:"text-red-500 bg-red-100",general:"text-blue-500 bg-blue-100"};function T(e){return Q[e]||"text-gray-500 bg-gray-100"}const q=()=>{d({name:"addCustomer"})};return(e,o)=>{const b=m("a-button"),R=m("a-flex"),E=m("a-divider"),U=m("a-image"),w=m("a-tooltip"),G=m("a-popconfirm"),J=m("a-table");return r(),c(S,null,[a(R,{justify:"space-between",align:"flex-start"},{default:s(()=>[L("p",re,[a(p(ne)),C(" "+n(e.$t("customers.label_list")),1)]),a(b,{type:"primary",onClick:q},{default:s(()=>[C(n(e.$t("customers.add")),1)]),_:1})]),_:1}),a(E,{style:{"margin-top":"10px"}}),a(J,{scroll:{x:!0},class:"whitespace-nowrap",columns:M.value,dataSource:O.value,pagination:y.value,loading:p(_).isLoading,"row-key":i=>i.id},{bodyCell:s(({column:i,record:t})=>[i.dataIndex==="full_avatar_url"?(r(),c(S,{key:0},[t!=null&&t.full_avatar_url?(r(),ae(U,{key:0,src:t.full_avatar_url,alt:"Profile Avatar",width:"3rem",height:"3rem",class:"rounded-full"},{previewMask:s(()=>[L("span",ie,n(e.$t("preview")),1)]),_:2},1032,["src"])):(r(),c("div",ce,n(P(t)),1))],64)):f("",!0),i.dataIndex==="type"?(r(),c("span",{key:1,class:se(`px-2 py-1 rounded ${T(t.type)}`)},n(e.$t(`customers.table_field.choose_customer.${t.type}`)||t.type),3)):f("",!0),i.dataIndex==="created_at"?(r(),c("span",me,n(p(N)(t.created_at).format("MM-DD-YYYY HH:mm:ss")),1)):f("",!0),i.dataIndex==="updated_at"?(r(),c("span",ue,n(p(N)(t.updated_at).format("MM-DD-YYYY HH:mm:ss")),1)):f("",!0),i.dataIndex==="actions"?(r(),c("div",pe,[a(w,null,{title:s(()=>[C(n(e.$t("customers.edit")),1)]),default:s(()=>[a(k,{bgColor:"bg-white ",textColor:"text-blue-700",onClick:K=>B(t)},{icon:s(()=>[a(p($),{icon:"solar-pen-bold",width:"18"})]),_:2},1032,["onClick"])]),_:2},1024),a(w,null,{title:s(()=>[C(n(e.$t("customers.delete")),1)]),default:s(()=>[a(k,{bgColor:"bg-white hover:text-red-600",textColor:"text-red-600"},{icon:s(()=>[a(G,{title:e.$t("popconfirm.delete.messages"),"ok-text":e.$t("popconfirm.delete.okay"),"cancel-text":e.$t("popconfirm.delete.cancel"),onConfirm:K=>V(t),onCancel:j,class:"text-red-600"},{default:s(()=>[a(p($),{icon:"solar-trash-bin-2-bold",width:"18"})]),_:2},1032,["title","ok-text","cancel-text","onConfirm"])]),_:2},1024)]),_:2},1024)])):f("",!0)]),_:1},8,["columns","dataSource","pagination","loading","row-key"])],64)}}});export{Ce as default};
